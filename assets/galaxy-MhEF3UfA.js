import{S as Y,q as Z,P as J,W as K,r as O,m as b,d as Q,s as $,A as B,c as E,a as N,M as ee,t as te,u as oe,B as W,n as z,o as R,p as q,v as ne,w as ae}from"./three.module-pkULuz9p.js";const f=new Y;f.fog=new Z(17,3e-4);const u=new J(75,window.innerWidth/window.innerHeight,.1,2e3);u.position.set(0,50,100);u.lookAt(0,0,0);const x=new K({antialias:!0});x.setSize(window.innerWidth,window.innerHeight);x.setPixelRatio(window.devicePixelRatio);document.body.appendChild(x.domElement);let A,y,P,h,F=!1;const G=new O({uniforms:{glowColor:{value:new b(16777096)},coreColor:{value:new b(16777215)},viewVector:{value:new Q}},vertexShader:`
        varying vec3 vNormal;
        varying vec3 vPositionNormal;
        void main() {
            vNormal = normalize(normalMatrix * normal);
            vPositionNormal = normalize((modelViewMatrix * vec4(position, 1.0)).xyz);
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
    `,fragmentShader:`
        uniform vec3 glowColor;
        uniform vec3 coreColor;
        varying vec3 vNormal;
        varying vec3 vPositionNormal;
        void main() {
            float intensity = pow(0.7 - dot(vNormal, vPositionNormal), 2.0);
            vec3 color = mix(coreColor, glowColor, intensity);
            gl_FragColor = vec4(color, 1.0);
        }
    `,side:$,blending:B,transparent:!0}),re=new E(1.5,32,32),H=new N(re,G);f.add(H);const T=[],se=5;for(let e=0;e<se;e++){const r=3+e*4,s=new E(r,32,32),p=new ee({color:new b().setHSL(.1,.8,.7),transparent:!0,opacity:.1,blending:B,side:te,depthWrite:!1}),m=new N(s,p);T.push(m),f.add(m)}const V=new oe(16777096,2,100);f.add(V);const n={count:2e4,size:.01,radius:100,branches:5,spin:1,randomness:.2,randomnessPower:3,insideColor:16736304,outsideColor:1784196};let c=null,L=null,w=null;const ie=()=>{w!==null&&(c.dispose(),L.dispose(),f.remove(w)),c=new W;const e=new Float32Array(n.count*3),r=new Float32Array(n.count*3),s=new Float32Array(n.count),p=new b(n.insideColor),m=new b(n.outsideColor);for(let i=0;i<n.count;i++){const l=i*3,d=Math.random()*n.radius,M=d*n.spin,C=i%n.branches/n.branches*Math.PI*2,D=Math.pow(Math.random(),n.randomnessPower)*(Math.random()<.5?1:-1)*n.randomness*d,_=Math.pow(Math.random(),n.randomnessPower)*(Math.random()<.5?1:-1)*n.randomness*d,X=Math.pow(Math.random(),n.randomnessPower)*(Math.random()<.5?1:-1)*n.randomness*d;e[l]=Math.cos(C+M)*d+D,e[l+1]=_*.1,e[l+2]=Math.sin(C+M)*d+X;const S=p.clone();S.lerp(m,d/n.radius),r[l]=S.r,r[l+1]=S.g,r[l+2]=S.b,s[i]=Math.random()}c.setAttribute("position",new z(e,3)),c.setAttribute("color",new z(r,3)),c.setAttribute("scale",new z(s,1));const g=document.createElement("canvas");g.width=16,g.height=16;const v=g.getContext("2d"),t=v.createRadialGradient(8,8,0,8,8,8);t.addColorStop(0,"rgba(255,255,255,1)"),t.addColorStop(.4,"rgba(255,255,255,0.8)"),t.addColorStop(1,"rgba(255,255,255,0)"),v.fillStyle=t,v.fillRect(0,0,16,16);const o=new ne(g);L=new R({size:n.size*50,sizeAttenuation:!0,depthWrite:!1,blending:B,vertexColors:!0,transparent:!0,opacity:.9,map:o}),w=new q(c,L),f.add(w)};ie();const I=new W,U=5e3,k=new Float32Array(U*3);for(let e=0;e<U*3;e+=3)k[e]=(Math.random()-.5)*1e3,k[e+1]=(Math.random()-.5)*1e3,k[e+2]=(Math.random()-.5)*1e3;I.setAttribute("position",new z(k,3));const le=new R({color:16777215,size:1,sizeAttenuation:!1,transparent:!0,opacity:.5}),ce=new q(I,le);f.add(ce);const a=document.createElement("button");a.innerText="Start Audio";a.style.position="absolute";a.style.top="20px";a.style.left="20px";a.style.padding="10px 20px";a.style.fontSize="16px";a.style.backgroundColor="#00ff00";a.style.border="none";a.style.borderRadius="5px";a.style.cursor="pointer";a.style.zIndex="1000";document.body.appendChild(a);a.addEventListener("click",async()=>{if(F)P&&(P.disconnect(),A.close()),F=!1,a.innerText="Start Audio",a.style.backgroundColor="#00ff00";else try{A=new(window.AudioContext||window.webkitAudioContext),y=A.createAnalyser(),y.fftSize=256;const e=y.frequencyBinCount;h=new Uint8Array(e);const r=await navigator.mediaDevices.getUserMedia({audio:!0});P=A.createMediaStreamSource(r),P.connect(y),F=!0,a.innerText="Stop Audio",a.style.backgroundColor="#ff0000"}catch(e){console.error("Error accessing microphone:",e),alert("Please allow microphone access to use this visualization")}});const de=new ae;function j(){requestAnimationFrame(j);const e=de.getElapsedTime();if(w&&(w.rotation.y=e*.05),u.position.x=Math.sin(e*.1)*100,u.position.z=Math.cos(e*.1)*100,u.lookAt(0,0,0),F&&y){y.getByteFrequencyData(h);const r=h.reduce((t,o)=>t+o)/h.length/255,s=h.slice(0,10).reduce((t,o)=>t+o)/10/255,p=1+s*2;H.scale.set(p,p,p),G.uniforms.viewVector.value=u.position;const m=1+s*.5;G.uniforms.glowColor.value.setRGB(m,m*.9,m*.5),V.intensity=1+s*10;const g=h.slice(40,80).reduce((t,o)=>t+o)/40/255,v=h.slice(80,120).reduce((t,o)=>t+o)/40/255;if(T.forEach((t,o)=>{const i=3+o*4,l=i+(s*2+g*1.5)*(o+1)*.5;t.scale.set(l/i,l/i,l/i);const d=.05+s*.1+o*.02,M=.8-o*.1,C=.7+v*.2;t.material.color.setHSL(d,M,C),t.material.opacity=.05+r*.15-o*.01}),c){c.attributes.position.array;const t=c.attributes.scale.array;for(let o=0;o<t.length;o++)t[o]=Math.random()*(1+r*5);c.attributes.scale.needsUpdate=!0,L.opacity=.6+r*.4}w&&(w.rotation.y+=r*.03)}x.render(f,u)}window.addEventListener("resize",()=>{u.aspect=window.innerWidth/window.innerHeight,u.updateProjectionMatrix(),x.setSize(window.innerWidth,window.innerHeight)});j();
