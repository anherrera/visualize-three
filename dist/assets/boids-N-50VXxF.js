import{S as w,m as f,q as y,P as x,W as b,d as s,x as S,M as g,a as v}from"./three.module-pkULuz9p.js";const h=new w;h.background=new f(13166335);h.fog=new y(13166335,8e-4);const r=new x(75,window.innerWidth/window.innerHeight,.1,1e3);r.position.set(0,50,100);const c=new b({antialias:!0});c.setSize(window.innerWidth,window.innerHeight);c.setPixelRatio(window.devicePixelRatio);document.body.appendChild(c.domElement);class M{constructor(t,i,e){this.position=new s(t,i,e),this.velocity=new s((Math.random()-.5)*2,(Math.random()-.5)*2,(Math.random()-.5)*2),this.acceleration=new s(0,0,0),this.maxSpeed=2,this.maxForce=.03,this.separationRadius=8,this.alignmentRadius=12,this.cohesionRadius=15,this.createMesh()}createMesh(){const t=new S(.2,1,4),i=new g({color:0,transparent:!1,opacity:1});this.mesh=new v(t,i),this.mesh.rotateX(Math.PI/2),h.add(this.mesh)}separate(t){const i=new s(0,0,0);let e=0;for(let o of t){const a=this.position.distanceTo(o.position);if(a>0&&a<this.separationRadius){const u=new s().subVectors(this.position,o.position).normalize().divideScalar(a);i.add(u),e++}}return e>0&&(i.divideScalar(e),i.normalize(),i.multiplyScalar(this.maxSpeed),i.sub(this.velocity),i.clampLength(0,this.maxForce)),i}align(t){const i=new s(0,0,0);let e=0;for(let o of t){const a=this.position.distanceTo(o.position);a>0&&a<this.alignmentRadius&&(i.add(o.velocity),e++)}if(e>0){i.divideScalar(e),i.normalize(),i.multiplyScalar(this.maxSpeed);const o=new s().subVectors(i,this.velocity);return o.clampLength(0,this.maxForce),o}return new s(0,0,0)}cohesion(t){const i=new s(0,0,0);let e=0;for(let o of t){const a=this.position.distanceTo(o.position);a>0&&a<this.cohesionRadius&&(i.add(o.position),e++)}return e>0?(i.divideScalar(e),this.seek(i)):new s(0,0,0)}seek(t){const i=new s().subVectors(t,this.position);i.normalize(),i.multiplyScalar(this.maxSpeed);const e=new s().subVectors(i,this.velocity);return e.clampLength(0,this.maxForce),e}flock(t){const i=this.separate(t),e=this.align(t),o=this.cohesion(t);i.multiplyScalar(1.5),e.multiplyScalar(1),o.multiplyScalar(1),this.acceleration.add(i),this.acceleration.add(e),this.acceleration.add(o)}boundaries(){this.position.x>100&&(this.position.x=-100),this.position.x<-100&&(this.position.x=100),this.position.y>100&&(this.position.y=-100),this.position.y<-100&&(this.position.y=100),this.position.z>100&&(this.position.z=-100),this.position.z<-100&&(this.position.z=100)}update(){this.velocity.add(this.acceleration),this.velocity.clampLength(0,this.maxSpeed),this.position.add(this.velocity),this.acceleration.multiplyScalar(0),this.boundaries(),this.updateMesh()}updateMesh(){if(this.mesh.position.copy(this.position),this.velocity.length()>0){const t=this.velocity.clone().normalize();this.mesh.lookAt(this.position.clone().add(t)),this.mesh.rotateX(-Math.PI/2)}this.mesh.material.color.setHex(0)}}const d=[],z=1e3;for(let n=0;n<z;n++){const t=new M((Math.random()-.5)*100,(Math.random()-.5)*100,(Math.random()-.5)*100);d.push(t)}let l=0,p=0;document.addEventListener("mousemove",n=>{l=n.clientX/window.innerWidth*2-1,p=-(n.clientY/window.innerHeight)*2+1});function m(){requestAnimationFrame(m);for(let n of d)n.flock(d),n.update();r.position.x+=(l*50-r.position.x)*.05,r.position.y+=(p*50-r.position.y)*.05,r.lookAt(0,0,0),c.render(h,r)}window.addEventListener("resize",()=>{r.aspect=window.innerWidth/window.innerHeight,r.updateProjectionMatrix(),c.setSize(window.innerWidth,window.innerHeight)});m();
